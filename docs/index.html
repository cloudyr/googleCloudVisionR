<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Access to 'Google Cloud Vision' API for Image Recognition, OCR and
    Labeling • googleCloudVisionR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Access to 'Google Cloud Vision' API for Image Recognition, OCR and
    Labeling">
<meta property="og:description" content="Interact with 'Google Cloud Vision' &lt;https://cloud.google.com/vision/&gt;
  API in R. Part of the 'cloudyr' &lt;https://cloudyr.github.io/&gt; project.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">googleCloudVisionR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
<div id="googlecloudvisionr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#googlecloudvisionr" class="anchor"></a>googleCloudVisionR</h1></div>

<p>R Package for Image Recognition, Object Detection, and OCR using the Google’s Cloud Vision API.</p>
<div id="google-cloud-vision-api" class="section level2">
<h2 class="hasAnchor">
<a href="#google-cloud-vision-api" class="anchor"></a>Google Cloud Vision API</h2>
<blockquote>
<p><strong>Cloud Vision API</strong> enables developers to understand the content of an image by encapsulating powerful machine learning models in an easy-to-use REST API. It quickly classifies images into thousands of categories (such as, “sailboat”), detects individual objects and faces within images, and reads printed words contained within images. You can build metadata on your image catalog, moderate offensive content, or enable new marketing scenarios through image sentiment analysis.</p>
</blockquote>
<p>Read more on the <a href="https://cloud.google.com/vision/">capabilities of the Google Cloud Vision API</a>.</p>
</div>
<div id="about-this-r-package" class="section level2">
<h2 class="hasAnchor">
<a href="#about-this-r-package" class="anchor"></a>About this R package</h2>
<p>This package allows you to call the following functionalities: label, text, landmark, face and logo detection.</p>
<p>The project is a continuation of the <a href="https://github.com/cloudyr/RoogleVision">RoogleVision</a> package by Florian Teschner and is relying on the authentication procedures offered by <a href="https://CRAN.R-project.org/package=googleAuthR">googleAuthR</a>.</p>
<p><strong>WARNING</strong>: the project is in active development and is not guaranteed to be stable in terms of function names, signatures, etc. Contributions through issues, pull requests are more than welcome.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>v0.1.0 is already available on CRAN, you can install it with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"googleCloudVisionR"</span>)</a></code></pre></div>
<p>If you need the latest version, just install the package directly from Github:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"cloudyr/googleCloudVisionR"</span>)</a></code></pre></div>
</div>
<div id="authentication" class="section level2">
<h2 class="hasAnchor">
<a href="#authentication" class="anchor"></a>Authentication</h2>
<p>You should use a <code>.json</code> file pertaining to a service account for authentication whose path you should specify in an environment variable <code>GCV_AUTH_FILE</code> for auto-authentication:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.setenv">Sys.setenv</a></span>(<span class="st">"GCV_AUTH_FILE"</span> =<span class="st"> "/fullpath/to/auth.json"</span>)</a></code></pre></div>
<p>This can alternatively be set on the command line or via an <code>Renviron.site</code> or <code>.Renviron</code> file (see <a href="https://CRAN.R-project.org/package=httr/vignettes/api-packages.html">here</a> for instructions).</p>
<p>If this is set, upon loading the package authentication happens automatically.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># GCV_AUTH_FILE set so auto-authentication happens</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(googleCloudVisionR)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt; Successfully authenticated via /fullpath/to/auth.json</span></a></code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>Let us retrieve annotations for this image: <img src="reference/figures/golden_retriever_puppies.jpg"></p>
<p>Label detection (default), with maximum 7 results returned per image:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">imagePath &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">    <span class="st">"extdata"</span>, <span class="st">"golden_retriever_puppies.jpg"</span>, <span class="dt">package =</span> <span class="st">"googleCloudVisionR"</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">  )</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="kw"><a href="reference/gcv_get_image_annotations.html">gcv_get_image_annotations</a></span>(</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">    <span class="dt">imagePaths =</span> imagePath,</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">    <span class="dt">feature =</span> <span class="st">"LABEL_DETECTION"</span>,</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">    <span class="dt">maxNumResults =</span> <span class="dv">7</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8">)</a>
<a class="sourceLine" id="cb5-9" data-line-number="9"></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt;                      image_path       mid      description     score topicality</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt; 1: golden_retriever_puppies.jpg /m/0bt9lr              Dog 0.9953705  0.9953705</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt; 2: golden_retriever_puppies.jpg  /m/04rky           Mammal 0.9890478  0.9890478</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt; 3: golden_retriever_puppies.jpg  /m/09686       Vertebrate 0.9851104  0.9851104</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt; 4: golden_retriever_puppies.jpg  /m/01z5f          Canidae 0.9813780  0.9813780</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt; 5: golden_retriever_puppies.jpg  /m/0kpmf        Dog breed 0.9683250  0.9683250</span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">#&gt; 6: golden_retriever_puppies.jpg /m/0d7s3w            Puppy 0.9400384  0.9400384</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="co">#&gt; 7: golden_retriever_puppies.jpg /m/01t032 Golden retriever 0.8966703  0.8966703</span></a></code></pre></div>
<p>Annotation can also happen in batches, allowing for continuing previously stopped (or interrupted) annotations as well.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="reference/gcv_get_image_annotations.html">gcv_get_image_annotations</a></span>(</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">    <span class="dt">imagePaths =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(image_path_<span class="dv">1</span>, image_path_<span class="dv">2</span>,..., image_path_<span class="dv">128</span>),</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">    <span class="dt">batchSize =</span> 64L,</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">    <span class="dt">savePath =</span> <span class="st">"path/to/annotation_file.csv"</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5">)</a></code></pre></div>
<p>Here we take 128 images and annotate them in batces of size 64. If, for example, we have previously annotated the first batch of images whose results have been stored in <code>savePath</code>, then only the leftovers are annotated. A dataframe with all annotations is returned and the new set of annotations gets appended to <code>savePath</code>.</p>
<p>Images can not only be read from local disk, but you can use URLs or Google Cloud Storage URIs as well:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="reference/gcv_get_image_annotations.html">gcv_get_image_annotations</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">    <span class="st">"https://bit.ly/2IhUzdE"</span>,</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">    <span class="st">"gs://vision-api-handwriting-ocr-bucket/handwriting_image.png"</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4">), <span class="dt">maxNumResults =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb7-5" data-line-number="5"></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt;                                                      image_path        mid description     score topicality</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt; 1:                                       https://bit.ly/2IhUzdE  /m/0bt9lr         Dog 0.9953705  0.9953705</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt; 2:                                       https://bit.ly/2IhUzdE   /m/04rky      Mammal 0.9890478  0.9890478</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt; 3: gs://vision-api-handwriting-ocr-bucket/handwriting_image.png /m/07s6nbt        Text 0.9540842  0.9540842</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt; 4: gs://vision-api-handwriting-ocr-bucket/handwriting_image.png  /m/03scnj        Line 0.9027576  0.9027576</span></a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=googleCloudVisionR">https://​cloud.r-project.org/​package=googleCloudVisionR</a>
</li>
<li>Report a bug at <br><a href="https://github.com/cloudyr/googleCloudVisionR/issues">https://​github.com/​cloudyr/​googleCloudVisionR/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Jeno Pal <br><small class="roles"> Maintainer </small>  </li>
<li>Tamas Koncz <br><small class="roles"> Author </small>  </li>
<li>Balazs Varkoly <br><small class="roles"> Author </small>  </li>
<li>Eszter Kocsis <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/cloudyr/googleCloudVisionR"><img src="https://travis-ci.org/cloudyr/googleCloudVisionR.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://codecov.io/gh/cloudyr/googleCloudVisionR?branch=master"><img src="https://codecov.io/gh/cloudyr/googleCloudVisionR/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>
</div>
</div>

      <footer><div class="copyright">
  <p>Developed by Jeno Pal, Tamas Koncz, Balazs Varkoly, Eszter Kocsis.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
